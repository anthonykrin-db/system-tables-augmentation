{"datasets":[{"name":"9c5e2f25","displayName":"Highest 100 Successful Run Duration Variance","query":"WITH job_stats AS (\n    SELECT\n        jr.job_name,\n        variance(jr.execution_duration / 1000) OVER (PARTITION BY jr.job_name) AS variance,\n        max(jr.execution_duration / 1000) OVER (PARTITION BY jr.job_name) AS max_duration,\n        min(jr.execution_duration / 1000) OVER (PARTITION BY jr.job_name) AS min_duration,\n        avg(jr.execution_duration / 1000) OVER (PARTITION BY jr.job_name) AS avg_duration,\n        percentile(jr.execution_duration / 1000, 0.25) OVER (PARTITION BY jr.job_name) AS q1_duration,\n        percentile(jr.execution_duration / 1000, 0.5) OVER (PARTITION BY jr.job_name) AS median_duration,\n        percentile(jr.execution_duration / 1000, 0.75) OVER (PARTITION BY jr.job_name) AS q3_duration\n    FROM\n        finops.system_lookups.v_job_runs jr\n    WHERE\n        jr.result_state = \"SUCCESS\" AND jr.usage_date BETWEEN :from_date AND :to_date\n)\nSELECT\n    job_name,\n    variance,\n    max_duration,\n    min_duration,\n    avg_duration,\n    q1_duration,\n    median_duration,\n    q3_duration\nFROM\n    job_stats\nGROUP BY\n    job_name,\n    variance,\n    max_duration,\n    min_duration,\n    avg_duration,\n    q1_duration,\n    median_duration,\n    q3_duration\nORDER BY\n    variance DESC\nLIMIT :top_n OFFSET :skip","parameters":[{"displayName":"From","keyword":"from_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-60d/d"}]}}},{"displayName":"To","keyword":"to_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}},{"displayName":"top_n","keyword":"top_n","dataType":"INTEGER","defaultSelection":{"values":{"dataType":"INTEGER","values":[{"value":"10"}]}}},{"displayName":"skip","keyword":"skip","dataType":"INTEGER","defaultSelection":{}}]}],"pages":[{"name":"db2f8e2c","displayName":"New Page","layout":[{"widget":{"name":"9058e55f","queries":[{"name":"main_query","query":{"datasetName":"9c5e2f25","fields":[{"name":"q3_duration","expression":"`q3_duration`"},{"name":"variance","expression":"`variance`"},{"name":"job_name","expression":"`job_name`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"variance","scale":{"type":"quantitative"},"displayName":"variance"},"y":{"fieldName":"job_name","scale":{"type":"categorical"},"displayName":"job_name"},"color":{"fieldName":"q3_duration","scale":{"type":"quantitative"},"displayName":"q3_duration"}},"frame":{"showTitle":true,"title":"Top \"n\" variance"}}},"position":{"x":0,"y":1,"width":6,"height":7}},{"widget":{"name":"05beb111","queries":[{"name":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_from_date","query":{"datasetName":"9c5e2f25","parameters":[{"name":"from_date","keyword":"from_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"from_date","queryName":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_from_date"}]},"frame":{"showTitle":true,"title":"From"}}},"position":{"x":0,"y":0,"width":2,"height":1}},{"widget":{"name":"49dcfb61","queries":[{"name":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_to_date","query":{"datasetName":"9c5e2f25","parameters":[{"name":"to_date","keyword":"to_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"to_date","queryName":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_to_date"}]},"frame":{"showTitle":true,"title":"To"}}},"position":{"x":2,"y":0,"width":2,"height":1}},{"widget":{"name":"6e100fbc","queries":[{"name":"main_query","query":{"datasetName":"9c5e2f25","fields":[{"name":"job_name","expression":"`job_name`"},{"name":"variance","expression":"`variance`"},{"name":"max_duration","expression":"`max_duration`"},{"name":"min_duration","expression":"`min_duration`"},{"name":"avg_duration","expression":"`avg_duration`"},{"name":"q1_duration","expression":"`q1_duration`"},{"name":"median_duration","expression":"`median_duration`"},{"name":"q3_duration","expression":"`q3_duration`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"job_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"job_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_name"},{"fieldName":"variance","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":2,"title":"variance","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"variance"},{"fieldName":"max_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":3,"title":"max_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"max_duration"},{"fieldName":"min_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":4,"title":"min_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"min_duration"},{"fieldName":"avg_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":5,"title":"avg_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"avg_duration"},{"fieldName":"q1_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":6,"title":"q1_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"q1_duration"},{"fieldName":"median_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":7,"title":"median_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"median_duration"},{"fieldName":"q3_duration","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":8,"title":"q3_duration","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"q3_duration"}]},"invisibleColumns":[],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false}},"position":{"x":0,"y":8,"width":6,"height":6}},{"widget":{"name":"ef51c784","queries":[{"name":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_top_n","query":{"datasetName":"9c5e2f25","parameters":[{"name":"top_n","keyword":"top_n"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"top_n","queryName":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_top_n"}]},"frame":{"showTitle":true,"title":"Top \"n\""}}},"position":{"x":4,"y":0,"width":1,"height":1}},{"widget":{"name":"0a6fd848","queries":[{"name":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_skip","query":{"datasetName":"9c5e2f25","parameters":[{"name":"skip","keyword":"skip"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"skip","queryName":"parameter_dashboards/01ef1476a7d91aebbb2dfe87edc287ff/datasets/01ef1476b2151931b829da7a978df818_skip"}]},"frame":{"showTitle":true,"title":"Skip"}}},"position":{"x":5,"y":0,"width":1,"height":1}}]}]}