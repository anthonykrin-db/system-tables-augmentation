{"datasets":[{"name":"5cee5421","displayName":"Monthly Burn Down","query":"WITH cte AS (\n    SELECT \n        date_trunc('MONTH', c.usage_date) AS usage_month, \n        sum(c.list_dbu_cost) AS list_dbu_cost, \n        sum(c.est_dbu_cost) AS est_dbu_cost\n    FROM  \n        finops.system_lookups.v_system_usage_cost c \n    INNER JOIN \n        finops.system_lookups.v_workspaces w ON w.workspace_id = c.workspace_id\n    WHERE \n        c.usage_date BETWEEN :from_date AND :to_date\n    GROUP BY date_trunc('MONTH', c.usage_date)\n)\nSELECT \n    usage_month, \n    list_dbu_cost, \n    SUM(list_dbu_cost) OVER (ORDER BY usage_month) AS list_dbu_cost_running_total,\n    est_dbu_cost, \n    SUM(est_dbu_cost) OVER (ORDER BY usage_month) AS est_dbu_cost_running_total\nFROM cte\nORDER BY usage_month ASC","parameters":[{"displayName":"From","keyword":"from_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now-1y/y"}]}}},{"displayName":"To","keyword":"to_date","dataType":"DATE","defaultSelection":{"values":{"dataType":"DATE","values":[{"value":"now/d"}]}}}]}],"pages":[{"name":"003e7e60","displayName":"New Page","layout":[{"widget":{"name":"e18b601a","queries":[{"name":"main_query","query":{"datasetName":"5cee5421","fields":[{"name":"monthly(usage_month)","expression":"DATE_TRUNC(\"MONTH\", `usage_month`)"},{"name":"sum(list_dbu_cost)","expression":"SUM(`list_dbu_cost`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_month)","scale":{"type":"temporal"},"displayName":"usage_month"},"y":{"fieldName":"sum(list_dbu_cost)","scale":{"type":"quantitative"},"displayName":"List dbu cost"}},"frame":{"showTitle":true,"title":"Monthly spend within time period"}}},"position":{"x":0,"y":2,"width":3,"height":5}},{"widget":{"name":"8810127a","queries":[{"name":"main_query","query":{"datasetName":"5cee5421","fields":[{"name":"monthly(usage_month)","expression":"DATE_TRUNC(\"MONTH\", `usage_month`)"},{"name":"list_dbu_cost_running_total","expression":"`list_dbu_cost_running_total`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"monthly(usage_month)","scale":{"type":"temporal"},"displayName":"usage_month"},"y":{"fieldName":"list_dbu_cost_running_total","scale":{"type":"quantitative"},"displayName":"List running total"}},"frame":{"showTitle":true,"title":"Cumulative spend within time period"}}},"position":{"x":3,"y":2,"width":3,"height":5}},{"widget":{"name":"86f6e50b","queries":[{"name":"parameter_dashboards/01ef16cebfd21e8d90e1b12d24c490d4/datasets/01ef16cec3cc1bf49f900083015d5998_from_date","query":{"datasetName":"5cee5421","parameters":[{"name":"from_date","keyword":"from_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"from_date","queryName":"parameter_dashboards/01ef16cebfd21e8d90e1b12d24c490d4/datasets/01ef16cec3cc1bf49f900083015d5998_from_date"}]},"frame":{"showTitle":true,"title":"From"}}},"position":{"x":0,"y":0,"width":2,"height":1}},{"widget":{"name":"af10a9fc","queries":[{"name":"parameter_dashboards/01ef16cebfd21e8d90e1b12d24c490d4/datasets/01ef16cec3cc1bf49f900083015d5998_to_date","query":{"datasetName":"5cee5421","parameters":[{"name":"to_date","keyword":"to_date"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"to_date","queryName":"parameter_dashboards/01ef16cebfd21e8d90e1b12d24c490d4/datasets/01ef16cec3cc1bf49f900083015d5998_to_date"}]},"frame":{"showTitle":true,"title":"To"}}},"position":{"x":2,"y":0,"width":2,"height":1}},{"widget":{"name":"9f7c00f6","textbox_spec":"List price"},"position":{"x":0,"y":1,"width":6,"height":1}},{"widget":{"name":"7e68a764","textbox_spec":"Discounted price"},"position":{"x":0,"y":7,"width":6,"height":1}},{"widget":{"name":"37c89b0b","queries":[{"name":"main_query","query":{"datasetName":"5cee5421","fields":[{"name":"monthly(usage_month)","expression":"DATE_TRUNC(\"MONTH\", `usage_month`)"},{"name":"sum(est_dbu_cost)","expression":"SUM(`est_dbu_cost`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"monthly(usage_month)","scale":{"type":"temporal"},"displayName":"usage_month"},"y":{"fieldName":"sum(est_dbu_cost)","scale":{"type":"quantitative"},"displayName":"Discounted dbu cost"}},"frame":{"showTitle":true,"title":"Monthly spend within time period"},"mark":{"colors":["#FFAB00","#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":0,"y":8,"width":3,"height":5}},{"widget":{"name":"a0e98b6d","queries":[{"name":"main_query","query":{"datasetName":"5cee5421","fields":[{"name":"monthly(usage_month)","expression":"DATE_TRUNC(\"MONTH\", `usage_month`)"},{"name":"est_dbu_cost_running_total","expression":"`est_dbu_cost_running_total`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"line","encodings":{"x":{"fieldName":"monthly(usage_month)","scale":{"type":"temporal"},"displayName":"usage_month"},"y":{"primary":{"fields":[{"fieldName":"est_dbu_cost_running_total","displayName":"List running total"}],"scale":{"type":"quantitative"},"axis":{"title":"Discounted running total"}},"secondary":{"fields":[],"scale":{"type":"quantitative"}}}},"frame":{"showTitle":true,"title":"Cumulative spend within time period"},"mark":{"colors":["#FFAB00","#00A972","#FF3621","#8BCAE7","#AB4057","#99DDB4","#FCA4A1","#919191","#BF7080"]}}},"position":{"x":3,"y":8,"width":3,"height":5}}]}]}