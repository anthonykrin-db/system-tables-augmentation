{"datasets":[{"name":"f3f82372","displayName":"Retried Jobs","query":"SELECT log(count(*)) log_runs,count(*) runs, attempt_number, \navg(execution_duration/1000) execution_duration_secs,\navg(setup_duration/1000) setup_duration_secs,\navg(cleanup_duration/1000) cleanup_duration_secs\nFROM finops.system_lookups.job_runs_tasks\nWHERE attempt_number>0\nGROUP BY attempt_number\nORDER BY avg(execution_duration)"},{"name":"045ee376","displayName":"Retried Jobs Detail","query":"SELECT \njob_name,\ntask_key,\nmax(attempt_number) max_attempts, \navg(attempt_number) avg_attempts, \nmax(execution_duration/1000) max_duration_secs,\nmax(setup_duration/1000) max_setup_secs,\nmax(cleanup_duration/1000) max_cleanup_secs, \njob_id\nFROM finops.system_lookups.v_job_runs_tasks\nWHERE attempt_number>0\nGROUP BY job_name,task_key,job_id\nORDER BY max_attempts DESC, avg(execution_duration)"},{"name":"6cab9258","displayName":"Job Last Run Detail","query":"\nSELECT jrt.task_index, jrt.job_id, jrt.job_name, jrt.run_id, jrt.task_key, \njrt.state_message, jrt.start_time\nFROM finops.system_lookups.v_job_runs_tasks jrt\nJOIN (\n    SELECT job_run_id as run_id\n    FROM finops.system_lookups.v_job_runs\n    WHERE job_id = :job_id\n    GROUP BY job_run_id\n) sub ON jrt.run_id = sub.run_id \nORDER BY jrt.task_index ASC","parameters":[{"displayName":"Job Id","keyword":"job_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"133140146761443"}]}}}]},{"name":"63b037c3","displayName":"Job Attempt Run Detail","query":"WITH job_runs AS (SELECT distinct job_id, run_id, attempt_number, start_time\n    FROM finops.system_lookups.v_job_runs_tasks jrt\n    WHERE job_id = :job_id \n    and jrt.attempt_number=:attempt\n)\nSELECT jrt.task_index, jrt.job_id, jrt.job_name, jrt.run_id, jrt.task_key, \njrt.state_message, jrt.start_time, jrt.result_state, jrt.execution_duration/1000 as duration_secs\nFROM finops.system_lookups.v_job_runs_tasks jrt\nJOIN (\n    SELECT run_id FROM job_runs jr WHERE jr.start_time = (\n    SELECT MAX(start_time) from job_runs\n) ) tasks ON tasks.run_id=jrt.run_id\nORDER BY jrt.task_index ASC","parameters":[{"displayName":"attempt","keyword":"attempt","dataType":"DECIMAL","defaultSelection":{"values":{"dataType":"DECIMAL","values":[{"value":"1"}]}}},{"displayName":"Job Id","keyword":"job_id","dataType":"STRING","defaultSelection":{"values":{"dataType":"STRING","values":[{"value":"133140146761443"}]}}}]}],"pages":[{"name":"7fcb94a3","displayName":"New Page","layout":[{"widget":{"name":"aa0cd796","queries":[{"name":"main_query","query":{"datasetName":"f3f82372","fields":[{"name":"runs","expression":"`runs`"},{"name":"attempt_number","expression":"`attempt_number`"},{"name":"log_runs","expression":"`log_runs`"}],"disaggregated":true}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"attempt_number","scale":{"type":"quantitative"},"displayName":"attempt_number"},"y":{"fieldName":"log_runs","scale":{"type":"quantitative"},"displayName":"log_runs"},"color":{"fieldName":"runs","scale":{"type":"quantitative"},"displayName":"runs"}},"frame":{"showTitle":true,"title":"# Runs by Attempt"}}},"position":{"x":0,"y":0,"width":3,"height":3}},{"widget":{"name":"c98003b5","queries":[{"name":"main_query","query":{"datasetName":"045ee376","fields":[{"name":"job_name","expression":"`job_name`"},{"name":"task_key","expression":"`task_key`"},{"name":"max_attempts","expression":"`max_attempts`"},{"name":"avg_attempts","expression":"`avg_attempts`"},{"name":"max_duration_secs","expression":"`max_duration_secs`"},{"name":"job_id","expression":"`job_id`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"job_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100000,"title":"job_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_name"},{"fieldName":"task_key","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":100001,"title":"task_key","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"task_key"},{"fieldName":"max_attempts","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100002,"title":"max_attempts","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"max_attempts"},{"fieldName":"avg_attempts","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":100003,"title":"avg_attempts","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"avg_attempts"},{"fieldName":"max_duration_secs","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":100004,"title":"max_duration_secs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"max_duration_secs"},{"fieldName":"job_id","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":100007,"title":"job_id","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_id"}]},"invisibleColumns":[{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"max_setup_secs","type":"float","displayAs":"number","order":100005,"title":"max_setup_secs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"max_cleanup_secs","type":"float","displayAs":"number","order":100006,"title":"max_cleanup_secs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false,"frame":{"showTitle":true,"title":"Transcribe job_id to see details"}}},"position":{"x":0,"y":3,"width":6,"height":6}},{"widget":{"name":"05fd9886","queries":[{"name":"main_query","query":{"datasetName":"f3f82372","fields":[{"name":"sum(runs)","expression":"SUM(`runs`)"},{"name":"attempt_number","expression":"`attempt_number`"},{"name":"avg(execution_duration_secs)","expression":"AVG(`execution_duration_secs`)"}],"disaggregated":false}}],"spec":{"version":3,"widgetType":"bar","encodings":{"x":{"fieldName":"attempt_number","scale":{"type":"quantitative"},"displayName":"attempt_number"},"y":{"fieldName":"avg(execution_duration_secs)","scale":{"type":"quantitative"},"displayName":"Average execution_duration_secs"},"color":{"fieldName":"sum(runs)","scale":{"type":"quantitative"},"displayName":"Sum of runs"}},"frame":{"showTitle":true,"title":"Avg Execution Duration by Attempt"}}},"position":{"x":3,"y":0,"width":3,"height":3}},{"widget":{"name":"c7a97877","queries":[{"name":"parameter_dashboards/01ef130a78c71ee587fd9608f963a428/datasets/01ef130e175c1dab96c48bdbecdc1726_job_id","query":{"datasetName":"6cab9258","parameters":[{"name":"job_id","keyword":"job_id"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"job_id","queryName":"parameter_dashboards/01ef130a78c71ee587fd9608f963a428/datasets/01ef130e175c1dab96c48bdbecdc1726_job_id"}]},"frame":{"showTitle":true,"title":"Job ID"}}},"position":{"x":0,"y":9,"width":2,"height":1}},{"widget":{"name":"ac926ac4","queries":[{"name":"main_query","query":{"datasetName":"6cab9258","disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{},"invisibleColumns":[],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false}},"position":{"x":0,"y":16,"width":6,"height":6}},{"widget":{"name":"5420a3ae","queries":[{"name":"parameter_dashboards/01ef130a78c71ee587fd9608f963a428/datasets/01ef13339f1e1c02bef9545b43b86ca9_attempt","query":{"datasetName":"63b037c3","parameters":[{"name":"attempt","keyword":"attempt"}],"disaggregated":false}}],"spec":{"version":2,"widgetType":"filter-single-select","encodings":{"fields":[{"parameterName":"attempt","queryName":"parameter_dashboards/01ef130a78c71ee587fd9608f963a428/datasets/01ef13339f1e1c02bef9545b43b86ca9_attempt"}]},"frame":{"showTitle":true,"title":"Attempt"}}},"position":{"x":2,"y":9,"width":2,"height":1}},{"widget":{"name":"d9c2b1d1","queries":[{"name":"main_query","query":{"datasetName":"63b037c3","fields":[{"name":"job_name","expression":"`job_name`"},{"name":"task_index","expression":"`task_index`"},{"name":"task_key","expression":"`task_key`"},{"name":"duration_secs","expression":"`duration_secs`"},{"name":"result_state","expression":"`result_state`"},{"name":"state_message","expression":"`state_message`"},{"name":"run_id","expression":"`run_id`"}],"disaggregated":true}}],"spec":{"version":1,"widgetType":"table","encodings":{"columns":[{"fieldName":"job_name","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":1,"title":"job_name","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"job_name"},{"fieldName":"task_index","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":2,"title":"indx","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"task_index"},{"fieldName":"task_key","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":3,"title":"task","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"task_key"},{"fieldName":"duration_secs","numberFormat":"0.00","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"float","displayAs":"number","visible":true,"order":4,"title":"secs","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"duration_secs"},{"fieldName":"result_state","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":5,"title":"result_state","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"result_state"},{"fieldName":"state_message","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"string","displayAs":"string","visible":true,"order":6,"title":"state","allowSearch":false,"alignContent":"left","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"state_message"},{"fieldName":"run_id","numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"type":"integer","displayAs":"number","visible":true,"order":8,"title":"run_id","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false,"displayName":"run_id"}]},"invisibleColumns":[{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"job_id","type":"integer","displayAs":"number","order":0,"title":"job_id","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false},{"numberFormat":"0","booleanValues":["false","true"],"imageUrlTemplate":"{{ @ }}","imageTitleTemplate":"{{ @ }}","imageWidth":"","imageHeight":"","linkUrlTemplate":"{{ @ }}","linkTextTemplate":"{{ @ }}","linkTitleTemplate":"{{ @ }}","linkOpenInNewTab":true,"name":"start_time","type":"integer","displayAs":"number","order":7,"title":"start_time","allowSearch":false,"alignContent":"right","allowHTML":false,"highlightLinks":false,"useMonospaceFont":false,"preserveWhitespace":false}],"allowHTMLByDefault":false,"itemsPerPage":25,"paginationSize":"default","condensed":true,"withRowNumber":false}},"position":{"x":0,"y":10,"width":6,"height":6}}]}]}